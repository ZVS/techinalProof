function notice_scroll(a){function b(){c.eq(d).animate({top:-c.height()},function(){$(this).css("top",c.height())}),d++,d>c.length-1&&(d=0),c.eq(d).animate({top:0})}for(var c=$(".module_notice."+a+" .notice_wrap .notice_list li"),d=0,e=1;e<c.length;e++)c.eq(e).css("top",c.height());c.show(),setInterval(b,3e3)}function change_view_type(a){"view_list"==a?($(".bookmacro_wrapper").addClass("book_list_110").removeClass("book_grid_110"),$("#module_sorting_tab .liststyle_line").addClass("active"),$("#module_sorting_tab .liststyle_grid").removeClass("active"),$.cookie("list_view_type","view_list")):($(".bookmacro_wrapper").addClass("book_grid_110").removeClass("book_list_110"),$("#module_sorting_tab .liststyle_line").removeClass("active"),$("#module_sorting_tab .liststyle_grid").addClass("active"),$.cookie("list_view_type","view_grid"));var b=$(this).scrollTop();$(this).scrollTop(b+1).scrollTop(b)}function trackRidiEvent(a,b){b=b||{},b.ts=Date.now(),b.e=a;var c=new Image,d="/images/log/tracker.gif?";for(var e in b)d+=e+"="+b[e]+"&";c.src=d}require(["jquery","cookie"],function(a){a(function(){a("#module_sorting_tab .liststyle_line").click(function(){return change_view_type("view_list"),!1}),a("#module_sorting_tab .liststyle_grid").click(function(){return change_view_type("view_grid"),!1})})}),function(a){function b(a){return 38==a}function c(a){return 40==a}function d(){var b=a.trim(a("#book_search").val());if(b=b.replace(/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi,""),l!=b){if(""===b)return h(),void(k=a.now());if(a("#btn_reset").show(),!(a.now()-k<100)){l=b;var c={q:b,instant:1,timestamp:a.now()};a.get("/search/",c,function(b,c,d){var e=parseInt(d.getResponseHeader("x-search-timestamp"));k>e||(b.length>0?a("#book_search_result").html(b).fadeIn(0):a("#book_search_result").html("").fadeOut(0),a("#book_search_result a").on("click touchstart",function(a){a.stopPropagation()}),k=e)},"html")}}}function e(){a("#book_search_result").is(":visible")?g():f()}function f(){a("#book_search_result").fadeIn(0)}function g(){a("#book_search_result").fadeOut(0),j(-1)}function h(){l="",a("#book_search").val(""),a("#btn_reset").hide(),a("#book_search_result").html(""),g()}function i(b){var c=a(".instant_search_box li.highlight"),d=c.length>0?parseInt(c.data("index"),10):-1,e=a(".search_writer li").length+a(".search_book li").length,f=(d+b)%e;0>f&&(f+=e),j(f)}function j(b){a(".search_writer li, .search_book li").removeClass("highlight");var c=a(".instant_search_box li[data-index="+b+"]");c.length>0&&c.addClass("highlight")}var k=0,l="";a(function(){a("html").on(Ridi.globals.isPc?"click":"touchstart",function(){g()}),a(".search_wrap").on("click touchstart",function(a){a.stopPropagation()}),a("#book_search").click(e).keyup(d).keydown(function(a){(b(a.which)||c(a.which))&&(a.preventDefault(),i(b(a.which)?-1:1))}).closest("form").submit(function(){var b=a(".search_writer .highlight a,.search_book .highlight a").attr("href");return void 0===b?!0:(location.href=b,!1)}),a("#book_search_result").on("mouseover",".search_book li,.search_writer li",function(b){b.preventDefault(),j(a(this).data("index"))}),a("#btn_reset").click(function(b){h(),a("#book_search").focus(),b.preventDefault()})})}(jQuery),define("GNB",["jquery"],function(a){window.Date.now=Date.now||function(){return+new Date};var b={};return b.refreshMyRidiLayer=function(){var b=function(b){a("#divMyMenuLayer").html(b)};a.ajax({type:"get",url:"/account/summary",cache:!1,success:b})},b.refreshCartLayer=function(){var c=function(c){a(".menu_cart .GNB_popup").html(c),a(".menu_cart .cart_num").html(a("#cart-item-count").val()),a(".menu_cart .book_remove_btn").click(function(c){c.preventDefault(),b.deleteCartItem(a(this).data("b_id"))}),a(".menu_cart .purchase").click(function(b){return b.preventDefault(),0===a("#cart-item-count").val()?!1:void(location.href="/cart/summary/checkout")})};a.ajax({type:"get",url:"/cart/summary",cache:!1,success:c})},b.deleteCartItem=function(c){var d=function(){b.refreshCartLayer(),b.deleteCartItemCallback(c)};return a.ajax({type:"post",url:"/cart/remove",data:{b_ids:[c]},success:d}),!1},b.deleteCartItemCallback=function(){},b.refreshWishlistLayer=function(){var c=function(c){a(".menu_wish .GNB_popup").html(c),a(".menu_wish .book_remove_btn").click(function(c){c.preventDefault(),b.deleteWishlistItem(a(this).data("b_id"))})};a.ajax({type:"get",url:"/wishlist/summary",cache:!1,success:c})},b.deleteWishlistItem=function(c){var d=function(){b.refreshWishlistLayer(),b.deleteWishlistItemCallback(c)};a.ajax({type:"post",url:"/wishlist/remove",data:{b_ids:[c]},success:d})},b.deleteWishlistItemCallback=function(){},b.preprocessNotification=function(a,c){for(var d=[],e=0;e<c.length;++e)try{var f=JSON.parse(c[e]);f.logData=JSON.stringify({section:"notification."+f.tag+"."+(b.data.isPc?"pc":"t"),idx:e,u_id:b.data.userId,obj_id:f.itemId});var g="";switch(f.imageType){case"book":g="icon_book"}f.iconClass=g,f.newClass=a>e?"new_noti":"",d.push(f)}catch(h){}return d},b.setNotificationCount=function(b){b>0?a("#gnb_noti_link .noti_num").removeClass("hidden"):a("#gnb_noti_link .noti_num").addClass("hidden"),a("#gnb_noti_link .noti_num").html(b)},b.markInboxAsRead=function(){var c=a("#gnb_noti_link .noti_num").html()||0;c>0&&b.api("/v0/notifications","put",{},function(a){204==a&&b.setNotificationCount(0)})},b.getStringCreatedAt=function(a){var b=Date.now()-a;return b=Math.floor(b/6e4),1>b?"방금 전":60>b?b+"분 전":(b=Math.floor(b/60),24>b?b+"시간 전":(b=Math.floor(b/24),30>b?b+"일 전":(b=Math.floor(b/30),b+"개월 전")))},b.refreshNotificationLayer=function(c){a("#notiMenuPopup .spin").hide(),b.setNotificationCount(c.unreadCount);var d=b.preprocessNotification(c.unreadCount,c.notifications);d.length>3?a("#notiMenuPopup .more_btn_wrapper").show():a("#notiMenuPopup .more_btn_wrapper").hide(),0===d.length?a("#notiMenuPopup .noti_empty_text").removeClass("hidden"):a("#notiMenuPopup .noti_empty_text").addClass("hidden");var e=a("#gnb_noti_tmpl").html();a("#notiMenuPopup .noti_list_wrapper > ul").html(""),a.tmpl(e,d).appendTo("#notiMenuPopup .noti_list_wrapper > ul"),a("#notiMenuPopup .noti_list a.btn_more").click(function(c){c.preventDefault();var d=a(this),e=function(){d.attachLogger({event:"click"}).trigger("click_log")};b.api("/v0/notifications/"+a(this).data("id"),"put",{},e,e)}),function f(){a(".noti_list .noti_time").each(function(){a(this).html("<p>"+b.getStringCreatedAt(a(this).data("created"))+"</p>")}),setTimeout(f,6e4)}()},b.api=function(b,c,d,e,f){f=f||function(){},c=c.toUpperCase(),("PUT"==c||"DELETE"==c)&&(d._method=c,c="POST");var g=-1!=window.navigator.userAgent.indexOf("MSIE");a.ajax({type:c,url:Ridi.globals.apiUrl+b,data:d,timeout:3e3,crossDomain:g?!1:!0,xhrFields:{withCredentials:!0},dataType:"json",success:function(a,b,c){e(c.status,a)},error:function(a,b,c){f(a.status,b,c)}})},b}),require(["jquery","spin","GNB"],function(a,b,c){a(function(){try{c.data=Ridi.globals}catch(d){c.data={}}var e=c.data.isPc?"click":"touchstart";if(a(".menu_user").one("touchstart click mouseover",function(){c.refreshMyRidiLayer()}),a(".menu_cart").one("touchstart click mouseover",function(){c.refreshCartLayer()}),a(".menu_wish").one("touchstart click mouseover",function(){c.refreshWishlistLayer()}),c.data.isPc){a("#gnb_noti_link").click(function(a){a.preventDefault(),location.href="/v2/Notification"}),a("#gnb_myridi_link").click(function(a){a.preventDefault(),location.href="/order/history"}),a("#gnb_cart_link").click(function(a){a.preventDefault(),location.href="/cart/"}),a("#gnb_wish_link").click(function(a){a.preventDefault(),location.href="/wishlist/"}),a("html").click(function(){a("#all_menu").fadeOut()});var f=a("#all_menu").find(a(".active"));a("#all_menu .general_menu_wrapper").hover(function(){f.removeClass("active")},function(){f.addClass("active")}),a(".menu_noti").hover(function(){a("#notiMenuPopup").css("display","block"),a("#notiMenuPopup").addClass("active"),c.markInboxAsRead()},function(){a("#notiMenuPopup.active").one("transitionend",function(){a("#notiMenuPopup").css("display","none")}),a("#notiMenuPopup").removeClass("active"),a("#browser_ie8 #notiMenuPopup").css("display","none")}).one("mouseenter",function(){a("#notiMenuPopup img.ridilog").attachLogger({event:"display"}).trigger("display_log")}),a(".menu_user").hover(function(){a("#divMyMenuLayer").css("display","block"),a("#divMyMenuLayer").addClass("active")},function(){a("#divMyMenuLayer.active").one("transitionend",function(){a("#divMyMenuLayer").css("display","none")}),a("#divMyMenuLayer").removeClass("active"),a("#browser_ie8 #divMyMenuLayer").css("display","none")}),a(".menu_cart").hover(function(){a("#cartMenuPopup").css("display","block"),a("#cartMenuPopup").addClass("active")},function(){a("#cartMenuPopup.active").one("transitionend",function(){a("#cartMenuPopup").css("display","none")}),a("#cartMenuPopup").removeClass("active"),a("#browser_ie8 #cartMenuPopup").css("display","none")}),a(".menu_wish").hover(function(){a("#wishMenuPopup").css("display","block"),a("#wishMenuPopup").addClass("active")},function(){a("#wishMenuPopup.active").one("transitionend",function(){a("#wishMenuPopup").css("display","none")}),a("#wishMenuPopup").removeClass("active"),a("#browser_ie8 #wishMenuPopup").css("display","none")})}else{var g=a(".menu_noti .GNB_popup"),h=a(".menu_user .GNB_popup"),i=a(".menu_cart .GNB_popup"),j=a(".menu_wish .GNB_popup"),k=[g,h,i,j],l=function(a){for(var b=0;b<k.length;++b)k[b]==a?a.toggle():k[b].hide()};a("html").on(e,function(){for(var b=0;b<k.length;++b)k[b].hide();a("#all_menu").fadeOut()});for(var m=function(a){a.stopPropagation()},n=0;n<k.length;++n)k[n].on(e,m);a("#gnb_noti_link").on(e,function(a){a.stopPropagation(),l(g),c.markInboxAsRead()}).one(e,function(){a("#notiMenuPopup img.ridilog").attachLogger({event:"display"}).trigger("display_log")}),a("#gnb_myridi_link").on(e,function(a){a.stopPropagation(),l(h)}),a("#gnb_cart_link").on(e,function(a){a.stopPropagation(),l(i)}),a("#gnb_wish_link").on(e,function(a){a.stopPropagation(),l(j)}),a(".general_menu_wrapper h3 a").on(e,function(b){a("#all_menu .active").removeClass("active"),a(this).closest(".general_menu_wrapper").addClass("active"),b.preventDefault()})}{var o={lines:9,length:3,width:2,radius:6,corners:1,rotate:12,direction:1,color:"#1e91e4",speed:1.5,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"};new b(o).spin(a(".menu_noti .spin")[0]),new b(o).spin(a("#divMyMenuLayer .spin")[0]),new b(o).spin(a(".menu_cart .spin")[0]),new b(o).spin(a(".menu_wish .spin")[0])}a("#show_all_menu_btn").on(e,function(b){a("#all_menu").fadeIn(),b.stopPropagation()}),a("#hide_all_menu_btn").on(e,function(b){a("#all_menu").fadeOut(),b.stopPropagation()}),a(".all_menu_wrapper").on(e,function(a){a.stopPropagation()}),function(){c.data.isLoggedIn&&!function a(){var b=function(b,d){200==b&&c.refreshNotificationLayer(d),setTimeout(a,6e4)},d={limit:5};c.api("/v0/notifications","get",d,b)}()}()})}),window.Date.now=Date.now||function(){return+new Date},function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-10567409-2","auto"),ga("send","pageview");